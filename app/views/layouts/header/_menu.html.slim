.relative.flex.justify-center(
  data-controller='dropdown'
  data-action='click->dropdown#toggle\
               click@window->dropdown#hide\
               touchstart@window->dropdown#hide\
               keydown.up->dropdown#previousItem\
               keydown.down->dropdown#nextItem\
               keydown.esc->dropdown#hide'
)
  button data-action='dropdown#toggle:stop'
    = image_tag user_avatar_url, alt: 'ユーザーアイコン',
      class: 'h-full w-full max-h-12 max-w-12 min-h-8 min-w-8 \
              sm:max-h-16 sm:max-w-16 rounded-full object-cover'
  div(
    data-dropdown-target='menu'
    class='hidden absolute top-8 -right-3 mt-8 flex \
          w-screen rounded-md max-w-max'
  )
    div(
      class='text-s bg-white rounded-lg border-2 border-stone-200 \
             overflow-hidden w-30 z-30'
    )
      = link_to t('views.layouts.header.contest_index'),
        user_contests_path(current_user),
        data: { dropdown_target: 'menuItem' },
        class: 'no-underline block p-4 bg-white hover:bg-stone-200 \
                focus:ring-inset focus:ring-2 focus:ring-cyan-500 \
                focus:rounded-lg'
      = link_to '利用規約',
        terms_path,
        data: { dropdown_target: 'menuItem' },
        class: 'no-underline block p-4 bg-white hover:bg-stone-200 \
                      focus:ring-inset focus:ring-2 focus:ring-cyan-500 \
                      focus:rounded-lg'
      = link_to 'プライバシーポリシー',
        privacy_path,
        data: { dropdown_target: 'menuItem' },
        class: 'no-underline block p-4 bg-white hover:bg-stone-200 \
                            focus:ring-inset focus:ring-2 focus:ring-cyan-500 \
                            focus:rounded-lg'
      = link_to t('views.layouts.user_menu.logout'),
        destroy_user_session_path,
        data: { turbo_method: :delete, dropdown_target: 'menuItem' },
        class: 'no-underline block p-4 bg-white hover:bg-stone-200 \
                focus:ring-inset focus:ring-2 focus:ring-cyan-500 \
                focus:rounded-lg'
      = link_to t('views.layouts.user_menu.leave'),
        user_path(current_user),
        data: { dropdown_target: 'menuItem',
                turbo_method: :delete,
                turbo_confirm: 'データをすべて削除して退会します。よろしいですか？' },
        class: 'no-underline block p-4 bg-white hover:bg-stone-200 \
                focus:ring-inset focus:ring-2 focus:ring-cyan-500 \
                focus:rounded-lg'
